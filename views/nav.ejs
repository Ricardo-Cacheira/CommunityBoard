<script type="text/javascript">
    $(document).ready(function () {
        $('.autocomplete').autocomplete({
            minLength: 1,
            highlight: true
        },
            {
                name: 'Communities',
                source: function (query, callback) {
                    $.get({
                        url: '/search',
                        data: { key: query }
                    }).done(function (data) {
                        callback(data)
                    })
                },
                displayKey: function (suggestion) { return ("<b>Name: </b>" + suggestion.Name + "&nbsp - &nbsp<b>Address: </b>" + suggestion.Address)}
            }),
        $('.autocomplete').bind('autocomplete:selected', function (ev, suggestion) {
            window.location.href = "/feed/" + suggestion.ID;
        });
    });
</script>

<div id="navbar">
    <ul>
        <li>
            <div class="dropdown">
                <button onclick="myFunction()" class="dropbtn">Communities</button>
                <div id="myDropdown" class="dropdown-content">
                    <% for (let i = 0; i < communityList.length; i++) { %>
                    <a href="/feed/<%- communityList[i].id %>"><%- communityList[i].name %></a>
                    <% } %>
                    <a href="/createCommunity">Create Community</a>
                </div>
            </div>
            <!-- <a class="active" href="#intro">Communities</a> -->
        </li>
        <li>
            <a href="/todo">Calendar</a>
        </li>
        <li>
            <a href="/profile">Profile</a>
        </li>
        <li>
            <a href="/">Index</a>
        </li>
        <li id="searchbar">
            <input class="form-control autocomplete" id="communities" name="key" type="text" placeholder='Search a Community by name or address'
            />
        </li>
        <li style="float:right">
            <a href="/logout">Logout</a>
        </li>
    </ul>
</div>