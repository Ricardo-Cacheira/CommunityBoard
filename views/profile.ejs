<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/jquery/3.2.1/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/profile.css">

    <title>
        <%= page_title %>
    </title>
</head>

<body>
    <%- include('nav', communityList); %>
        <div>

                <div id="updatediv">
                    
                    <div id="updateform">
                        <form method="POST" action="/updateUser" id="update" disabled>
                            <h3>Update your personal info</h3>
                            Username:
                            <input type="text" name="username" id="username" value="<%= userinfo.userName %>">
                            <hr> Email:
                            <input type="email" name="email" id="email" value="<%= userinfo.email %>">
                            <hr> FirstName:
                            <input type="text" name="firstname" id="firstname" value="<%= userinfo.firstName %>">
                            <hr> LastName:
                            <input type="text" name="lastname" id="lastname" value="<%= userinfo.lastName %>">
                    </div>
                        <button type="submit" id="usubmit"> Update info </button>
                        </form>
                <div>
                        <input type="button" id="hideshowinfo" value="Update your info" style="margin: 1vh 0.5vw">

                    <div id="welcomemessage" style="display: inline-block; width: 30%">
                        <h2> Welcome to CommunityBoard,
                            <b>
                                <%= userinfo.firstName %>
                                    <%= userinfo.lastName %>
                            </b>
                        </h2>
                    </div>

                    <div>
                        <div id="accepts" style="display: none">
                            <form method="POST" action="/acceptHelp" id="register" disabled>
                                <h3> Accept help</h3>

                                <% for (let i = 0; i < accepts.length; i++) { %>
                                    <% var element = accepts[i]%>
                                        <li class="accept">
                                            <article class="accept-content">
                                                <br>
                                                <p class="post-info">
                                                    <div onclick="window.location.replace('/post/<%= element.id %>');">
                                                        <%= 'Post: '+ element.content %>
                                                    </div>
                                                </p>
                                            </article>
                                        </li>
                                        <% } %>
                            </form>
                        </div>
                        <input type="button" id="hideshowaccept" value="You have <%= accepts.length %> posts with volunteers" style="margin: 1vh 1.5vw; float: right;">
                    </div>


                    <div id="userScore">
                        <h2>
                            <% if(userinfo.userScore == 0){ %>
                                <b>
                                    You don't have any points yet :(
                                    <br> Help someone to get some!!

                                </b>
                                <% } %>

                                    <% if(userinfo.userScore != 0){ %>
                                        <b>
                                            You currently have
                                            <b style="color: orange">
                                                <%= userinfo.userScore %>
                                            </b> points! Thanks for helping!!
                                        </b>
                                        <% } %>
                        </h2>
                    </div>

                </div>

                <script>
                    jQuery(document).ready(function () {
                        jQuery('#hideshowinfo').on('click', function (event) {
                            jQuery('#updateform').toggle('hide');
                        });
                    });
                </script>
                <script>
                    jQuery(document).ready(function () {
                        jQuery('#hideshowaccept').on('click', function (event) {
                            jQuery('#accepts').toggle('hide');
                        });
                    });
                </script>

                <script src="/js/main.js"></script>
</body>

</html>